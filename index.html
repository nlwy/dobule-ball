<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>åŒè‰²çƒæœºé€‰</title>
  <style>
    h2 {
      margin-top: 40px;
      font-size: 20px;
      color: red;
      padding: 0 20px;
      width: 100%;
      box-sizing: border-box;
      text-align: center;
    }

    h2 span {
      font-size: 14px;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h3 {
      font-size: 14px;
      width :100%;
      box-sizing: border-box;
      padding: 0 20px;
      color: #666;
      margin-top: 20px;
    }
    h3 p,h3 b{
      color : red
    }
    h3 p:nth-child(2) {
      color: #6bcbea;
    }
    * {
      padding: 0;
      margin: 0;
    }

    ul {
      display: flex;
    }

    ul li {
      list-style: none;
      background: radial-gradient(circle at 8px 5px, #fff2f2, red);
      color: #fff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin: 15px 5px 0;
      line-height: 40px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      position: relative;
      perspective: 1200px;
      font-family:Verdana, Geneva, Tahoma, sans-serif;
      perspective-origin: 50% 50%;
      animation: round 1s infinite;
      animation-iteration-count:1;
      opacity: 0;
      /* transform: scale(0); */
      animation-fill-mode: forwards; 
    }
    @keyframes round {
      form {
        transform: rotate(0);
        opacity: 0;
      }
      to {
        transform: rotate(720deg);
        opacity:1;
      }
    }
    ul li:last-child {
      background: radial-gradient(circle at 8px 5px, #e2f8ff, #6bcbea);
    }

    button {
      display: block;
      width: 150px;
      line-height: 50px;
      border: none;
      background: #6bcbea;
      outline: none;
      color: #fff;
      border-radius: 10px;
      margin-top: 30px;
      margin-bottom: 30px;
      font-size: 18px;
    }
    section {
      padding: 0 20px;
      width: 100%;
      box-sizing: border-box;
    }
    section label {
      display: flex;
      width: 100%;
      padding: 10px 0;
      font-size: 14px;
      font-weight: bold;
      align-items: center;
      color: red;
    }
    section label:nth-child(2),section label:nth-child(2) input {
      color : #6bcbea;
    }
   
    section label input {
      height: 30px;
      border: 1px solid #ccc;
      padding-left: 5px;
      font-size: 16px;
      font-weight: bold;
      -webkit-appearance: none;
      flex: 1;
      color: red;
    }
  </style>
  <script>

    function DobuleBall() {

      this.ball = []
      this.$ = function (el) {
        return document.querySelector(el)
      }
      this.$$ = function (el) {
        return document.createElement(el)
      }
      // this.addDom()

    }

    DobuleBall.prototype = {
      /**
       * å‘é¡µé¢æ·»åŠ åŒè‰²çƒ
       */
      addDom: function () {

        var that = this
        var body = this.$('body')
        var ul = this.$$('ul')
        var fragment = document.createDocumentFragment()

        this.getBall(33, 6).forEach(function (item) {
          var li = that.$$('li')
          li.innerText = item
          fragment.appendChild(li)
        })

        ul.appendChild(fragment)
        body.insertBefore(ul, this.$('#but'))

      },
      /**
      * ç­›é€‰çº¢çƒ
      */
      screenBall: function(value){
        try {
          var screenBall = value.replace(/(^\s*)|(\s*$)/g, "")
          var screenBallArr = screenBall.indexOf('.') != -1 ? screenBall.split('.') : screenBall.split(' ')
          //å»é™¤å‡å…ƒç´ 
          screenBallArr = screenBallArr.filter(a => a)
          //å»é‡
          return value ? [...new Set(screenBallArr)] : []
        }
        catch (err){
          console.log(err)
          alert('æ‚¨è¾“å…¥çš„ç­›é€‰å·ç æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚')
        }
      },
      /**
       * è·å–éšæœºæ•°å¦‚æœä¸ºä¸€ä½åœ¨å‰é¢åŠ 0
       */
      randomBall: function (num) {
        var number = Math.floor(Math.random() * num) + 1
        number = number < 10 ? '0' + number : number
        return number.toString()
      },
      /**
       * è·å–ç¯®çƒæ•°å¹¶è¿›è¡Œæ’åº æœ€åä¸€ä½ä¸ºçº¢çƒ
       */
      getBall: function (max, num, exclude) {

        var dobuleBall = []
        //è·å–è¿‡æ»¤çš„çº¢çƒ
        var screenRedBall = this.screenBall(this.$('#redBall').value)
        this.$('#screenRedBall').innerText = !screenRedBall.length ? 'æ²¡æœ‰è¿‡æ»¤å·ç ' : screenRedBall.sort((a, b) => a - b)
        //è·å–è¿‡æ»¤çš„ç¯®çƒ
        var screenBlueBall = this.screenBall(this.$('#blueBall').value)
        this.$('#screenBlueBall').innerText = !screenBlueBall.length ? 'æ²¡æœ‰è¿‡æ»¤å·ç ' : screenBlueBall.sort((a, b) => a - b)
        //é€‰æ‹©çº¢çƒ
        while (dobuleBall.length < num) {
          var redBall = this.randomBall(max)
          if(!dobuleBall.includes(redBall) && !screenRedBall.includes(redBall)){
            dobuleBall.push(redBall)
          }
        }

        dobuleBall.sort((a, b) => a - b)
        //é€‰æ‹©è“çƒ
        while (dobuleBall.length < 7) {
          var blueBall = this.randomBall(16)
          !screenBlueBall.includes(blueBall) && dobuleBall.push(blueBall)
        }

        this.ball = dobuleBall
        console.log(this.ball)
        return dobuleBall
      }
    }

    window.onload = function () {
      var ball = new DobuleBall()
      document.querySelector('#but').addEventListener('click', function () {
        ball.addDom()
      }, false)
    }

  </script>
</head>

<body>
  <h2>ğŸ‰ğŸ‰æ­å–œå‘è´¢ï¼Œå¤§å‰å¤§åˆ©ğŸ‰ğŸ‰
    <br>ğŸ‰ğŸ‰ç¥æ‚¨ä¸­å¤§å¥–ğŸ˜œğŸğŸ’–ğŸ‰ğŸ‰
    <span>
      <br>æ¬¢è¿ä½¿ç”¨åŒè‰²çƒæœºé€‰ç³»ç»Ÿ,ç‰ˆæœ¬å·v1.1.1
      <br>å¼€å‘è€…ï¼šæ¥ 
    </span>
</h2>
<h3>è¾“å…¥æ‚¨è¦è¿‡æ»¤çš„å·ç ï¼Œç”¨<b>ç©ºæ ¼</b>æˆ–è€…<b>ç‚¹</b>åˆ†å¼€</h3>
<section>
  <label>çº¢çƒï¼š<input type="text" id="redBall"></label>
  <label>ç¯®çƒï¼š<input type="text" id="blueBall"></label>
</section>
<h3>
  <p>æ‚¨è¿‡æ»¤çš„çº¢çƒä¸ºï¼š<span id="screenRedBall"></span></p>
  <p>æ‚¨è¿‡æ»¤çš„ç¯®çƒä¸ºï¼š<span id="screenBlueBall"></span></p>
  <br>ä»¥ä¸‹æ˜¯æ‚¨è¿‡æ»¤åæœºé€‰çš„åŒè‰²çƒï¼š
</h3>
<button id="but">æœºé€‰ä¸€æ³¨</button>
</body>

</html>